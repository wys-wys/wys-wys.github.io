### 下载并启动为知笔记服务端docker镜像

#### mac/linux系统：

请在终端（Terminal）窗口中输入下面的命令

```
cd ~
mkdir wizdata
```

我们在用户主目录建立一个wizdata的文件夹。为知笔记服务端会把所有的数据保存在这个目录里面。如果是正式使用，请注意定时备份该目录。也可以联系我们，使用更高级版本，将数据保存在NAS，私有云等专用存储里面。

然后通过下面的命令，下载并启动为知笔记服务

```
docker run --name wiz -it -d -v  ~/wizdata:/wiz/storage -p 80:80 -e SEARCH=true wiznote/wizserver
```

#### windows系统：

请按下键盘上面的Win+R，或者点击开始菜单，选择运行，然后在对话框里面输入：

```
powershell
```

将会打开命令行窗口。

然后在命令行窗口里面输入：

```
D:\
cd \
md wizdata
```

将会在D盘根目录下面建立一个wizdata文件夹，所有为知笔记服务端的数据，都将会保存在这个目录里面。您也可以自己修改这个目录。

然后在命令行里面继续输入：

```
docker run --name wiz -it -d -v  D:\wizdata:/wiz/storage -p 80:80 -e SEARCH=true wiznote/wizserver
```

第一次运行镜像，因为需要下载docker镜像，并且初始化数据，速度要慢一些。请耐心等待。（根据网络状况，可能需要10分钟或者更长时间。）在下载完成后，第一次启动镜像大概需要2-3分钟时间。

然后打开浏览器，在地址栏里面输入：http://localhost，如果服务正常，则会出现下面的界面



如果遇到下面的界面：



通常表示为知笔记服务还没有启动起来，请继续等待并刷新浏览器。

**注意：启动后请参考常见问题进行时区的设置**

如果您当前服务器/电脑的80端口已经被占用，则可以使用其他的端口，例如使用8080端口 mac/linux:

```
docker run --name wiz -it -d -v  ~/wizdata:/wiz/storage -p 8080:80 -e SEARCH=true wiznote/wizserver
```

windows:

```
docker run --name wiz -it -d -v  D:\wizdata:/wiz/storage -p 8080:80 -e SEARCH=true wiznote/wizserver
```

您也可以自行修改端口。注意，修改端口后，在浏览器里面，则需要输入相应的端口号，例如：

```
http://localhost:8080
```

如果您需要为局域网内其他用户提供服务，则需要获取自己电脑的ip地址（局域网ip，具体方法，请自行搜索），然后在浏览器地址栏里面输入类似下面的地址即可：

```
http://192.168.1.186
```

如果不是80端口，则需要包含端口号，例如：

```
http://192.168.1.186:8080
```

如果是Windows系统，通常情况下，您需要在Windows防火墙中开放相应的端口。

### 常用命令

#### 修改启动参数，并重新启动服务，例如修改映射端口，或者设置是否启动搜索服务：

```
docker stop wiz
docker rm wiz
docker run --name wiz -it -d -v  ~/wizdata:/wiz/storage -p 80:80 -e SEARCH=true wiznote/wizserver
```

其中第三行，请自行修改为自己需要的命令行。

#### 系统重新启动后，重新启动服务：

```
docker start wiz
```

#### 更新服务命令行：

```
docker stop wiz
docker rm wiz
docker pull wiznote/wizserver:latest
docker run --name wiz -it -d -v  ~/wizdata:/wiz/storage -p 80:80 -e SEARCH=true wiznote/wizserver
```

其中最后一行，请自行修改为自己需要的命令行

### 常见问题

#### 管理员账号是什么？

默认管理员账号：admin@wiz.cn，密码：123456。请在部署完成后，使用这个账号，登录网页版，然后修改管理员密码。其他用户，请自行注册。免费版本可以注册5个用户（不包含管理员账号）

#### 为知笔记数据保存在哪里？

所有数据，都保存在我们前面建立的目录里面。请定时备份该目录，避免数据丢失。

#### 重新启动服务器/电脑后，如何重新启动为知笔记服务？

在命令行中窗口/终端中，输入

```
docker start wiz
```

就可以重新启动为知笔记服务了。

#### 可以使用企业已有用户登录吗？

可以，请联系我们的客服。

#### 数据可以保存在专用的存储设备或者私有云里面吗？

可以，请联系我们的客服

#### 可以使用客户端访问吗？

可以，您可以直接使用所有的官方客户端，然后在登录的时候，选择登录到企业私有服务器即可。注意：该功能仅限于客户端所在网络可以访问到您的企业私有服务器才可以。例如，手机客户端，在离开公司网络的环境下，通常无法访问私有部署的为知笔记。但是已经离线的数据，则可以正常访问。也可以在离线环境下新建/修改笔记，并在回到公司后进行同步。

#### 可以禁止客户端访问吗？

可以禁用客户端访问，确保数据只能通过网页版访问。一旦离开公司网络，就无法访问任何数据。

#### 为知笔记服务端有时间限制吗？

没有。在限定的用户数量下，您可以永久免费使用。如果想要更多用户使用，请联系我们购买使用许可。

#### 如何升级为知笔记服务端？

我们会经常更新docker镜像。您只需要下载更新docker镜像，然后重新启动docker镜像即可升级为知笔记服务端。无需更多额外操作。

下面是更新镜像命令行：

```
docker stop wiz
docker rm wiz
docker pull wiznote/wizserver:latest
```

更新完成后，重新使用前面启动镜像的命令，就可以完成服务端升级。

#### 使用一段时间后，如果想要将数据从本地硬盘迁移到NAS或者云存储里面可以吗？

可以。包括数据库，笔记数据内容等，都可以完整的进行迁移。具体方案，请联系我们的客服。

#### 如何进行数据备份？

您可以自己备份用户数据目录，或者将数据保存在NAS/云存储里面。如有需求，请联系我们的客服。

#### 可以部署在路由器里面吗？

由于路由器通常CPU性能较低，内存也不够大，所以基本无法运行起来。

#### 可以支持微信/微博收藏吗？

因为微信微博收藏服务，依赖于微信/微博的在线服务。因此对于不能外网无法访问的私有部署服务，无法做到在微信/微博应用内进行收藏。 对于企业私有部署，我们可以代为开发和部署微信/微博收藏服务（收费项目）。

#### 服务启动后新建笔记时间不正确

因为docker镜像默认时区不正确。因此需要进入docker里面手工设置一下时区，命令如下：

```
docker exec -it wiz /bin/bash
cp /usr/share/zoneinfo/Asia/Shanghai /etc/localtime
exit
```

上面的命令，会把docker里面的时区设置为东八区（北京时间）。如果需要设置成其他的时区，请自行修改上面的命令。具体时区的名称，可以搜索linux时区名称获取。

如果是linux，则可以通过在命令行里面加入命令，来自动获取当前时区：

```
-v  /etc/localtime:/etc/localtime
```

完整命令行：实际使用是，请根据自己的情况调整其他参数，例如映射路径，端口映射等。

```
run --name wiz -it -d -v  ~/wizdata:/wiz/storage -p 8088:80 -v  /etc/localtime:/etc/localtime -e SEARCH=true wiznote/wizserver
```

如果是mac系统，则可以通过下面的命令行来自动设置时区（实际使用是，请根据自己的情况调整其他参数，例如映射路径，端口映射等。）

```
-v  /etc/localtime:/etc/localtime
```