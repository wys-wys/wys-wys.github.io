[Skip to content](https://github.com/CCChieh/IBMyes#start-of-content)



![img](https://github.githubassets.com/images/search-key-slash.svg)

[Pull requests](https://github.com/pulls)[Issues](https://github.com/issues)

[Marketplace](https://github.com/marketplace)

[Explore](https://github.com/explore)







 

![@wys-wys](https://avatars2.githubusercontent.com/u/63457826?s=60&v=4) 



# [CCChieh](https://github.com/CCChieh)/**[IBMYes](https://github.com/CCChieh/IBMYes)**

- 
-  Watch [46](https://github.com/CCChieh/IBMYes/watchers)
-  Star[1.2k](https://github.com/CCChieh/IBMYes/stargazers)
-  Fork[10.1k](https://github.com/CCChieh/IBMYes/network/members)

- [Code](https://github.com/CCChieh/IBMYes)
- [Issues63](https://github.com/CCChieh/IBMyes/issues)
- [Pull requests54](https://github.com/CCChieh/IBMyes/pulls)
- [Actions](https://github.com/CCChieh/IBMyes/actions)
- [Projects](https://github.com/CCChieh/IBMYes/projects)
- [Wiki](https://github.com/CCChieh/IBMyes/wiki)
- [Security](https://github.com/CCChieh/IBMyes/security)
- [Insights](https://github.com/CCChieh/IBMYes/pulse)

<details class="details-overlay details-reset position-relative" style="box-sizing: border-box; display: block; position: relative !important;"><summary role="button" aria-haspopup="menu" style="box-sizing: border-box; display: list-item; cursor: pointer; list-style: none;"><div class="UnderlineNav-item mr-0 border-0" style="box-sizing: border-box; padding: 8px 16px; font-size: 14px; line-height: 30px; color: rgb(27, 31, 35); text-align: center; white-space: nowrap; background-color: initial; border: 0px !important; transition: border-bottom-color 0.36s ease-in 0s; margin-right: 0px !important;"><svg class="octicon octicon-kebab-horizontal" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M8 9a1.5 1.5 0 100-3 1.5 1.5 0 000 3zM1.5 9a1.5 1.5 0 100-3 1.5 1.5 0 000 3zm13 0a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"></path></svg><span class="sr-only" style="box-sizing: border-box; padding: 0px; clip: rect(0px, 0px, 0px, 0px); overflow-wrap: normal; border: 0px; position: absolute; width: 1px; height: 1px; overflow: hidden; margin: -1px; white-space: nowrap;"></span></div></summary></details>

 master 

[ **1** branch](https://github.com/CCChieh/IBMYes/branches)[ **0** tags](https://github.com/CCChieh/IBMYes/tags)

[Go to file](https://github.com/CCChieh/IBMYes/find/master)

<details class="details-overlay details-reset position-relative d-block" style="box-sizing: border-box; display: block !important; position: relative !important;"><summary role="button" style="box-sizing: border-box; display: list-item; cursor: pointer; list-style: none;"><span class="ml-2 btn d-none d-md-flex flex-items-center" style="box-sizing: border-box; position: relative; display: flex !important; padding: 5px 16px; font-size: 14px; font-weight: 500; line-height: 20px; white-space: nowrap; vertical-align: middle; cursor: pointer; user-select: none; border: 1px solid rgba(27, 31, 35, 0.15); border-radius: 6px; appearance: none; color: rgb(36, 41, 46); background-color: rgb(250, 251, 252); box-shadow: rgba(27, 31, 35, 0.04) 0px 1px 0px, rgba(255, 255, 255, 0.25) 0px 1px 0px inset; transition: background-color 0.2s cubic-bezier(0.3, 0, 0.5, 1) 0s; align-items: center !important; margin-left: 8px !important;">Add file<span class="dropdown-caret ml-1" style="box-sizing: border-box; margin-left: 4px; display: inline-block; width: 0px; height: 0px; vertical-align: middle; content: &quot;&quot;; border-style: solid; border-width: 4px 4px 0px; border-right-color: transparent; border-bottom-color: transparent; border-left-color: transparent; opacity: 0.8;"></span></span></summary></details>

 Code 

## Latest commit

[![@CCChieh](https://avatars0.githubusercontent.com/u/18118573?s=60&u=40d4f9e14fa9b7f992df0969b967f8599301d3f2&v=4)](https://github.com/CCChieh)

[CCChieh](https://github.com/CCChieh/IBMYes/commits?author=CCChieh) [修改镜像](https://github.com/CCChieh/IBMYes/commit/8ee1daccaa0e2d5d8bad86c131ffdd43761d89e2)

[8ee1dac](https://github.com/CCChieh/IBMYes/commit/8ee1daccaa0e2d5d8bad86c131ffdd43761d89e2)[19 hours ago](https://github.com/CCChieh/IBMYes/commit/8ee1daccaa0e2d5d8bad86c131ffdd43761d89e2)

## Git stats

- [ **31** commits](https://github.com/CCChieh/IBMYes/commits/master)

## Files

Type

Name

Latest commit message

Commit time



[.github/workflows](https://github.com/CCChieh/IBMYes/tree/master/.github/workflows)

[修改镜像](https://github.com/CCChieh/IBMYes/commit/8ee1daccaa0e2d5d8bad86c131ffdd43761d89e2)

19 hours ago





[IBM_Cloud_CLI](https://github.com/CCChieh/IBMYes/tree/master/IBM_Cloud_CLI)

[update cli](https://github.com/CCChieh/IBMYes/commit/8157172d40bc3a7ee4aef1345554bb56084fb89e)

2 days ago





[fping-msys2.0](https://github.com/CCChieh/IBMYes/tree/master/fping-msys2.0)

[cloudflare ip](https://github.com/CCChieh/IBMYes/commit/f83500b56f0a6845540d93959cd146973621416a)

3 months ago





[img/README](https://github.com/CCChieh/IBMYes/tree/master/img/README)

[Update README](https://github.com/CCChieh/IBMYes/commit/7ecdaf257f964c2d705615f8d855029e1453f10c)

2 months ago





[v2ray-cloudfoundry](https://github.com/CCChieh/IBMYes/tree/master/v2ray-cloudfoundry)

[fix v2ray-cloudfoundary repo](https://github.com/CCChieh/IBMYes/commit/4bb34d142c66469326987eec8ba48dc9c4c5c7f8)

2 days ago





[.gitmodules](https://github.com/CCChieh/IBMYes/blob/master/.gitmodules)

[add badafans/v2ray-cloudfoundry](https://github.com/CCChieh/IBMYes/commit/dd345d9e1b1f6e41e7aa0b150e6224506ec1a5f7)

118 Bytes

3 months ago





[README.docx](https://github.com/CCChieh/IBMYes/blob/master/README.docx)

[fork后可能没action的解决方法](https://github.com/CCChieh/IBMYes/commit/851231450f111a6193ed8020cec0951ea0973e85)

1.3 MB

3 months ago





[README.md](https://github.com/CCChieh/IBMYes/blob/master/README.md)

[update readme](https://github.com/CCChieh/IBMYes/commit/468285926ff475a403272637a5bcc0cced35e91b)

7.93 KB

2 days ago





[README.pdf](https://github.com/CCChieh/IBMYes/blob/master/README.pdf)

[fork后可能没action的解决方法](https://github.com/CCChieh/IBMYes/commit/851231450f111a6193ed8020cec0951ea0973e85)

1.24 MB

3 months ago





[install.sh](https://github.com/CCChieh/IBMYes/blob/master/install.sh)

[自动拒绝更新](https://github.com/CCChieh/IBMYes/commit/a51dcafd54cd2af5ffd19b6b83f16afd9abfa4a0)

3.52 KB

2 days ago



## README.md

# IBMYes

**测速节点已经停用，无法测试**

**自动重启可能失效，IBM的API节点似乎失效**

**本项目初衷是想学习CI/CD以及容器的使用，任何与此无关的问题将不做回复。**

本项目包括3部分

1. IBM Cloud Fonudray搭建应用
2. 利用Github的Actions 每周重启 IBM Cloud Fonudray
3. ~~Cloudflare 高速节点中转~~

# 使用IBM Cloud Fonudray搭建V2Ray

首先注册https://cloud.ibm.com/

注册步骤略过

登录后点击右侧 创建资源

[![image-20200615192854218](https://github.com/CCChieh/IBMYes/raw/master/img/README/image-20200615192854218.png)](https://github.com/CCChieh/IBMYes/blob/master/img/README/image-20200615192854218.png)

可以找到Cloud Foundray

[![image-20200615193004495](https://github.com/CCChieh/IBMYes/raw/master/img/README/image-20200615193004495.png)](https://github.com/CCChieh/IBMYes/blob/master/img/README/image-20200615193004495.png)

创建公共应用程序

[![image-20200615193052842](https://github.com/CCChieh/IBMYes/raw/master/img/README/image-20200615193052842.png)](https://github.com/CCChieh/IBMYes/blob/master/img/README/image-20200615193052842.png)

填写相关信息

[![image-20200615193202810](https://github.com/CCChieh/IBMYes/raw/master/img/README/image-20200615193202810.png)](https://github.com/CCChieh/IBMYes/blob/master/img/README/image-20200615193202810.png)

区域必须达拉斯，只有那里有免费的。

[![image-20200615193340241](https://github.com/CCChieh/IBMYes/raw/master/img/README/image-20200615193340241.png)](https://github.com/CCChieh/IBMYes/blob/master/img/README/image-20200615193340241.png)

填写应用名称

接着进入右上角命令行

[![image-20200615210821081](https://github.com/CCChieh/IBMYes/raw/master/img/README/image-20200615210821081.png)](https://github.com/CCChieh/IBMYes/blob/master/img/README/image-20200615210821081.png)

打开命令行，右上角选择相应的地区（Dallas），粘贴一键安装脚本：

```
wget --no-check-certificate -O install.sh https://raw.githubusercontent.com/CCChieh/IBMYes/master/install.sh && chmod +x install.sh  && ./install.sh
```

[![image-20200615210944753](https://github.com/CCChieh/IBMYes/raw/master/img/README/image-20200615210944753.png)](https://github.com/CCChieh/IBMYes/blob/master/img/README/image-20200615210944753.png)

在配置的时候需要输入应用名称（这里就是我创建应用的时候输入应用名称我输入的是ibmyes，你需要改成你自己的名称）和应用内存大小（我们刚刚选择的是256）

[![image-20200615211154143](https://github.com/CCChieh/IBMYes/raw/master/img/README/image-20200615211154143.png)](https://github.com/CCChieh/IBMYes/blob/master/img/README/image-20200615211154143.png)

配置好，等待几分钟，便可自动完成安装。完成安装后，将输出随机的UUID 、WebSocket路径以及对应的配置链接：

[![image-20200615211339053](https://github.com/CCChieh/IBMYes/raw/master/img/README/image-20200615211339053.png)](https://github.com/CCChieh/IBMYes/blob/master/img/README/image-20200615211339053.png)

然后访问我们刚刚的应用的域名，如果不记得可以返回我们刚才的资源，点击访问应用程序

[![image-20200615211851731](https://github.com/CCChieh/IBMYes/raw/master/img/README/image-20200615211851731.png)](https://github.com/CCChieh/IBMYes/blob/master/img/README/image-20200615211851731.png)

URL后加上生成的WebSocket路径，看到`Bad Request`便成功了

[![image-20200615211949359](https://github.com/CCChieh/IBMYes/raw/master/img/README/image-20200615211949359.png)](https://github.com/CCChieh/IBMYes/blob/master/img/README/image-20200615211949359.png)

这里请记下你的域名

把完成安装后输出的配置链接复制到你的v2rayN或v2rayNg中，修改地址为你的应用的域名（前面我们`Bad Request`那个网页的域名。

[![image-20200615212537944](https://github.com/CCChieh/IBMYes/raw/master/img/README/image-20200615212537944.png)](https://github.com/CCChieh/IBMYes/blob/master/img/README/image-20200615212537944.png)

至此我们已经有一个可用的v2ray了，但是他每10天会重启一次，而且网速延迟很差，所以接下来会解决这个问题。

# 利用Github的Actions 每周重启 IBM Cloud Fonudray

IBM Cloud 10天不操作就会关机，所以我们需要 十天内对其重启一次，避免关机。

首先登录IBM Cloud

点击又上角的命令行

在这一步我们主要是记录4个值

```
IBM_ACCOUNT // IBM Cloud的登录邮箱和密码
IBM_APP_NAME // 应用的名称
REGION_NUM // 区域编码
RESOURSE_ID // 资源组ID
```

具体后面会一步一步完成

[![image-20200615175949804](https://github.com/CCChieh/IBMYes/raw/master/img/README/image-20200615175949804.png)](https://github.com/CCChieh/IBMYes/blob/master/img/README/image-20200615175949804.png)

进入命令行先执行

```
ibmcloud login
```

输入邮箱和密码。

之后记录下区域(Region)

[![image-20200615180817619](https://github.com/CCChieh/IBMYes/raw/master/img/README/image-20200615180817619.png)](https://github.com/CCChieh/IBMYes/blob/master/img/README/image-20200615180817619.png)

```
#1. au-syd
#2. in-che
#3. jp-tok
#4. kr-seo
#5. eu-de
#6. eu-gb
#7. us-south
#8. us-east
```

这里需要记下和区域对应的编号也就是`REGION_NUM`，比如我这里是us-south,那么我的区域编号是`7`

接下来获取资源组id`RESOURSE_ID`

```
ibmcloud resource groups
```

[![image-20200615183425453](https://github.com/CCChieh/IBMYes/raw/master/img/README/image-20200615183425453.png)](https://github.com/CCChieh/IBMYes/blob/master/img/README/image-20200615183425453.png)

图中所指向便是`RESOURSE_ID`

现在返回github，到本项目

```
https://github.com/CCChieh/IBMYes
```

[![image-20200615184239713](https://github.com/CCChieh/IBMYes/raw/master/img/README/image-20200615184239713.png)](https://github.com/CCChieh/IBMYes/blob/master/img/README/image-20200615184239713.png)

右上角fork到自己的github下，然后进入setting

[![image-20200615184327329](https://github.com/CCChieh/IBMYes/raw/master/img/README/image-20200615184327329.png)](https://github.com/CCChieh/IBMYes/blob/master/img/README/image-20200615184327329.png)

选择Secrets

[![image-20200615184426979](https://github.com/CCChieh/IBMYes/raw/master/img/README/image-20200615184426979.png)](https://github.com/CCChieh/IBMYes/blob/master/img/README/image-20200615184426979.png)

New secret

分别建立四个secret

```
IBM_ACCOUNT // IBM Cloud的登录邮箱和密码
IBM_APP_NAME // 应用的名称
REGION_NUM // 区域编码
RESOURSE_ID // 资源组ID
```

以`IBM_ACCOUNT`为例[![image-20200615184703280](https://github.com/CCChieh/IBMYes/raw/master/img/README/image-20200615184703280.png)](https://github.com/CCChieh/IBMYes/blob/master/img/README/image-20200615184703280.png)

第一行为邮箱，第二行为密码。

这里需要邮箱和密码所以中间换行 ，其他的不需要换行 。

把四个secret补充完成

[![image-20200615185015130](https://github.com/CCChieh/IBMYes/raw/master/img/README/image-20200615185015130.png)](https://github.com/CCChieh/IBMYes/blob/master/img/README/image-20200615185015130.png)

之后点击上方Actions，在这里你就会看到有个IBM Cloud Auto Restart在执行。

[![image-20200615185614978](https://github.com/CCChieh/IBMYes/raw/master/img/README/image-20200615185614978.png)](https://github.com/CCChieh/IBMYes/blob/master/img/README/image-20200615185614978.png)

如果没有看见Action的话到自己仓库的`/.github/workflows/ibm.yml`

[![image-20200615235426917](https://github.com/CCChieh/IBMYes/raw/master/img/README/image-20200615235426917.png)](https://github.com/CCChieh/IBMYes/blob/master/img/README/image-20200615235426917.png)

编辑下，随意增添个空行然后commit下

[![image-20200615235540567](https://github.com/CCChieh/IBMYes/raw/master/img/README/image-20200615235540567.png)](https://github.com/CCChieh/IBMYes/blob/master/img/README/image-20200615235540567.png)

就可以看见有action了

第一次可能因为secret没添加导致workflow执行失败，只需要点下

[![image-20200615191100959](https://github.com/CCChieh/IBMYes/raw/master/img/README/image-20200615191100959.png)](https://github.com/CCChieh/IBMYes/blob/master/img/README/image-20200615191100959.png)

进去后按照下图

[![image-20200615191035212](https://github.com/CCChieh/IBMYes/raw/master/img/README/image-20200615191035212.png)](https://github.com/CCChieh/IBMYes/blob/master/img/README/image-20200615191035212.png)

找到 `Re-run jobs`重新执行一次即可，至此自动重启已经ok了。

> 感谢药油@[My Flavor](https://yaohuo.me/bbs/userinfo.aspx?touserid=24109)，原本打算弄bash在自己服务器定期执行脚本，现在看了他的帖子，发现用Actions是一个更好的选择。

# Cloudflare 高速节点中转

> 此部分贡献来自药油@[Joyace](https://yaohuo.me/bbs/userinfo.aspx?touserid=5461)、@[老婆](https://yaohuo.me/bbs/userinfo.aspx?touserid=21843)以及@[小俊博客](https://www.xjisme.com/)

cloudflare官网：https://www.cloudflare.com/

注册，登录这里不再累述。

登录后左上角点击菜单找到workers

[![image-20200615214101750](https://github.com/CCChieh/IBMYes/raw/master/img/README/image-20200615214101750.png)](https://github.com/CCChieh/IBMYes/blob/master/img/README/image-20200615214101750.png)

创建Worker

[![image-20200615214140306](https://github.com/CCChieh/IBMYes/raw/master/img/README/image-20200615214140306.png)](https://github.com/CCChieh/IBMYes/blob/master/img/README/image-20200615214140306.png)

打开和复制脚本

```
addEventListener(
"fetch",event => {
let url=new URL(event.request.url);
url.hostname="ibmyes.us-south.cf.appdomain.cloud";
let request=new Request(url,event.request);
event. respondWith(
fetch(request)
)
}
)
```

修改第四行为你的应用的域名

[![image-20200615214339159](https://github.com/CCChieh/IBMYes/raw/master/img/README/image-20200615214339159.png)](https://github.com/CCChieh/IBMYes/blob/master/img/README/image-20200615214339159.png)

点击发送，测试是否出现`Bad Request`，出现则成功，点击保存并部署。

[![image-20200615214543839](https://github.com/CCChieh/IBMYes/raw/master/img/README/image-20200615214543839.png)](https://github.com/CCChieh/IBMYes/blob/master/img/README/image-20200615214543839.png)

[![image-20200615214722195](https://github.com/CCChieh/IBMYes/raw/master/img/README/image-20200615214722195.png)](https://github.com/CCChieh/IBMYes/blob/master/img/README/image-20200615214722195.png)

这里会给一个网址，*.*.workers.dev,这就是你的cloudflare中转后的域名。

然后我们去v2的客户端中修改地址

[![image-20200615215120033](https://github.com/CCChieh/IBMYes/raw/master/img/README/image-20200615215120033.png)](https://github.com/CCChieh/IBMYes/blob/master/img/README/image-20200615215120033.png)

现在已经使用了cloudflare的代理。

下面我们将筛选cloudflare的高速节点。

克隆本项目到你的电脑上。

打开项目下的`fping-msys2.0`目录运行`自动查找最优CF节点-懒人专用.bat`

[![image-20200615215435278](https://github.com/CCChieh/IBMYes/raw/master/img/README/image-20200615215435278.png)](https://github.com/CCChieh/IBMYes/blob/master/img/README/image-20200615215435278.png)

这里假设我获取的最优ip是`104.17.188.91`

在客户端把地址换成ip，伪装域名换成我们cloudflare的workers的域名即可

[![image-20200615215820188](https://github.com/CCChieh/IBMYes/raw/master/img/README/image-20200615215820188.png)](https://github.com/CCChieh/IBMYes/blob/master/img/README/image-20200615215820188.png)

如果不方便用电脑优选ip也可以把地址设为`cloudflare.com`或`icook.tw`,这两个一个cloudflare官网，自然也是使用自家cdn，另外一家是台湾省的一个网站，域名指向的ip一般也是比较好的线路。

[![image-20200615220201165](https://github.com/CCChieh/IBMYes/raw/master/img/README/image-20200615220201165.png)](https://github.com/CCChieh/IBMYes/blob/master/img/README/image-20200615220201165.png)

这里稍微提下原理吧，主要涉及CDN和请求头部，CDN识别流量是访问哪个网站的是根据请求头的Host来识别，所以这里要么host用我们的域名 ，要么我们伪装成我们的域名，这样都可以达到回源我们网站的请求。如果自己有域名也可以换自己的域名，域名也可以从第三方接入商cname，有兴趣的同学可以自己研究下。

## About

No description, website, or topics provided.

### Resources

[ Readme](https://github.com/CCChieh/IBMyes#readme)

[ 35.97 MB](javascript:void(0))

## [Releases](https://github.com/CCChieh/IBMYes/releases)

No releases published

## [Packages](https://github.com/CCChieh/IBMYes/packages)

No packages published

## [Contributors 2](https://github.com/CCChieh/IBMYes/graphs/contributors)

- [![@CCChieh](https://avatars1.githubusercontent.com/u/18118573?s=64&v=4)](https://github.com/CCChieh)[**CCChieh** CCChieh](https://github.com/CCChieh)
- [![@hiiragiyuriko](https://avatars0.githubusercontent.com/u/42064430?s=64&v=4)](https://github.com/hiiragiyuriko)[**hiiragiyuriko** 柊 ゆり子](https://github.com/hiiragiyuriko)

## Languages

- [Batchfile99.1%](https://github.com/CCChieh/IBMYes/search?l=batchfile) 
- Other0.9%

- © 2020 GitHub, Inc.
- [Terms](https://github.com/site/terms)
- [Privacy](https://github.com/site/privacy)
- [Security](https://github.com/security)
- [Status](https://githubstatus.com/)
- [Help](https://docs.github.com/)



- [Contact GitHub](https://github.com/contact)
- [Pricing](https://github.com/pricing)
- [API](https://docs.github.com/)
- [Training](https://services.github.com/)
- [Blog](https://github.blog/)
- [About](https://github.com/about)

 Octotree

WHAT'S NEW IN 5.2.0

 [CCChieh](https://github.com/CCChieh) / [IBMyes](https://github.com/CCChieh/IBMyes)

 master



Login to unlock more features

<iframe id="blockbyte-bs-sidebar" class="notranslate" aria-hidden="true" __idm_frm__="382" data-pos="right" style="box-sizing: border-box; opacity: 0; pointer-events: none; position: fixed; top: 0px; left: auto; width: 350px; max-width: none; height: 0px; z-index: 2147483646; speak: none; border: none; transform: translate3d(350px, 0px, 0px); transition: width 0s ease 0.3s, height 0s ease 0.3s, opacity 0.3s ease 0s, transform 0.3s ease 0s; background-color: rgba(255, 255, 255, 0.8) !important; display: block !important; right: 0px; color: rgb(36, 41, 46); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"></iframe>