![SMB文件共享教程](https://pic2.zhimg.com/v2-a54209211876a287bac0c471b6eed760_1440w.jpg?source=172ae18b)

# SMB文件共享教程

[![VanHelsing](https://pic4.zhimg.com/v2-e2ad73eb8efd7eb3104cc1a86e1b734a_xs.jpg?source=172ae18b)](https://www.zhihu.com/people/vanhelsing-56)

[VanHelsing](https://www.zhihu.com/people/vanhelsing-56)

一只新手大学生

**Server Message Block -- SMB**，是一种文件共享协议。当文件原件在你的A电脑上，而你想在局域网下用你的手机、iPad或是另一台电脑来访问A电脑上的该文件时，你可能需要用到SMB共享。在本文中假设我们想要在手机上观看已经下载在电脑上的一部大小为31.5GB的《扎克·施耐德版正义联盟》。

![img](https://pic4.zhimg.com/v2-f475001068a81af23d13d451a29ce0d3_r.jpg)

你需要的设备：一台Windows电脑（作为共享服务器，以下简称A电脑），一台手机、平板或是另一台电脑。

前提条件：**所有设备连接在同一个局域网。**比如连接在同一个路由器或它的Wi-Fi。

## **打开SMB服务**

在A电脑上打开 开始 - Windows系统文件夹 - 控制面板 - 程序 - 启用或关闭Windows功能，勾选其中的“SMB 1.0/CIFS 文件共享支持”和另一个SMB选项并点击“确定”。

![img](https://pic4.zhimg.com/v2-14ed5b6bb9f59e83bc43e5f92bbcbf67_r.jpg)

![img](https://pic3.zhimg.com/80/v2-0790d7dcd8bb1a54463439623018e1aa_720w.jpg)

## **设置共享文件夹**

选择你要共享的文件夹，右键 - 属性 - 共享选项卡。

点击“网络文件和文件夹共享”下的“共享”按钮。单击下拉箭头选择“Everyone”并添加，选择相应的读写权限。出于安全考虑，没有修改需求时建议选择只读。最后点击”共享“按钮并点击“完成”。关于如何停止共享文件夹请自行百度。（能百度得到准确答案的坚决不写）

![img](https://pic2.zhimg.com/v2-a403ed35b29d7bc5f10f5cf0f8e6bdad_r.jpg)

![img](https://pic3.zhimg.com/v2-a1b97a1fd47536e8b14d56329ba1d9d2_r.jpg)

点击“密码保护”下的“网络和共享中心”链接，检查第一大项“专用（当前配置文件）”下的第一项是否已选择“启用网络发现”并勾选“启用网络连接设备的自动设置”。

如果你想在连接电脑时无需用户名和密码，请在最后一个大项“所有网络”下的最后一个小项“密码保护的共享”下选择无密码保护的共享。出于安全考虑，不建议选择该项目。

![img](https://pic1.zhimg.com/v2-d4e32a0df30a5255a6581a6a98c9667c_r.jpg)

![img](https://pic1.zhimg.com/v2-a296376dd1de53e372e2424f5a980e80_r.jpg)

## **远程连接**

在连接之前，你需要先知道A电脑的IP地址，这一步也请自行百度。

其次，如果在之前你没有选择无需用户名和密码，那么你需要确定一下在远程连接时的用户名和密码。

- 如果在A电脑上你使用本地账户登录，那么你远程连接时的用户名是你本地账户的用户名和密码。
- 如果在A电脑上你使用微软账户登录，那么你远程连接时的用户名是你在A电脑上的用户名和你微软账户的密码。A电脑上的用户名可以在C盘-用户文件夹下看到以你用户名为名的文件夹。

![img](https://pic2.zhimg.com/v2-00526c98c828eabe7a2c125808584bc1_r.jpg)

开始连接。以iPhone自带的“文件”App为例。

打开文件App，点击右上角的三个点按钮，选择“连接服务器”。在服务器一栏输入A电脑的IP地址，点按”连接“。“连接身份”选择“注册用户”，名称和密码输入上一步确定的用户名和密码。点按“下一步”即可连接并看到你的共享文件夹。

![img](https://pic2.zhimg.com/v2-9b069220c357bcada6defa12704b55d1_r.jpg)

由于自带的“文件”App能解码的视频格式太少，我再以iOS上我使用较多的另一个视频播放App -- Infuse为例。

点按“新增文件来源”按钮并下拉菜单，Infuse会自动扫描局域网上的设备。选择A电脑，填入用户名和密码后点按“保存”即可连接。

![img](https://pic4.zhimg.com/v2-b045c07641cb722d38d75d9fdb2dcb27_r.jpg)

免费版本的Infuse不能播放4K视频，观看4K视频可以使用另一个App -- APlayer。但是APlayer的解码格式没有Infuse多，且SMB连接播放时并不支持断点续播功能。

Windows、Mac等其他设备添加SMB连接方式自行百度。

## **登录不上微软账户（Microsoft Account）？**

这是一个和本文主题不太相关的问题，但却是这次遇到的最繁琐的问题。在测试分别使用微软账户和本地账户登录，SMB用户名密码的问题时我遇到的微软账户无法登陆问题。当我从微软账户切换到用本地账户登录后，再想切换回微软账户时一直显示“发生了错误”。

针对这个问题网上的解决方式鱼龙混杂，微软官方就在其中一个问答中给出了多达六种解决方案。

在折腾了很久之后，我确定了解决方案。首先点击任务栏的网络按钮，点击其中的“网络和Internet”选项。在弹出的设置窗口中点击“更改适配器选项”。对已连接的网络，右键选择属性。如果你的网络不支持IPv6，请不要勾选“Internet协议版本6”选项。点击“Internet协议版本4”选项，点击“属性”。下方选择“使用下面的DNS服务器地址”，填入4.2.2.1和4.2.2.2并点击“确定”。此时即可连接到微软账户。登录成功后记得还原上述设置。

![img](https://pic2.zhimg.com/v2-c3f596672fe7e60dfbc9dd0adbd756fd_r.jpg)

很久之前就想使用SMB来进行局域网内的文件共享，然而网上教程一大堆，用得上的没几个，所以就放弃了。这次4K片源的扎克施耐德导演剪辑版正义联盟上线。手机上放不下31.5G的4K HDR全片，于是重新拾起SMB，果然又是一顿折腾。

总的来说，在大部分人传输文件时仍然使用微信、网盘乃至U盘时代，SMB对于多设备间的文件共享和协同工作带来的效率提升是巨大的，尤其是在传输大文件的时候。

最后，微软，真的，辣鸡！

编辑于 03-22

[文件共享](https://www.zhihu.com/topic/19576494)